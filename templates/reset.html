{% extends "base.html" %}
{% block content %}
  <h2>Reset Student Password</h2>
  <form method="POST">
    <div class="form-group">
      <label for="student_email">Student Email</label>
      <input type="email" class="form-control" id="student_email" name="student_email" placeholder="student@example.com" required>
    </div>
    <button type="submit" class="btn btn-danger">Reset Password</button>
  </form>

  {% if new_password %}
  <div id="password-display" class="mt-4">
    <h3>New Password for {{ student_email }}:</h3>
    <p id="new-password" style="font-size: 1.5em; font-weight: bold;">{{ new_password }}</p>
    <p>This password will expire in <span id="timer">120</span> seconds.</p>
  </div>
  {% endif %}
{% endblock %}
{% block scripts %}
  {% if new_password %}
  <script>
    var seconds = 120;
    var timer = document.getElementById('timer');
    var interval = setInterval(function(){
      seconds--;
      timer.textContent = seconds;
      if(seconds <= 0){
        clearInterval(interval);
        document.getElementById('password-display').innerHTML = "<p>The password has expired. Please note it down immediately.</p>";
      }
    }, 1000);
  </script>
  {% endif %}
{% endblock %}
