<!DOCTYPE html>
<html lang="en" class="light-mode">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sign In &bull; ResetApp</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Our shared styles, including darkâ€‘mode overrides -->
  <link
    href="{{ url_for('static', filename='css/style.css') }}"
    rel="stylesheet"
  />
</head>
<body>
  <div class="theme-toggle">
    <button class="btn btn-sm" id="toggleTheme">ðŸŒ“</button>
  </div>

  <div class="d-flex justify-content-center align-items-center full-height">
    <div class="card login-card shadow-lg text-center">
      <img
        src="{{ url_for('static', filename='img/logo.png') }}"
        alt="ResetApp Logo"
        class="logo-img mb-4"
      />

      <h1 class="display-4 mb-3">Welcome Back!</h1>
      <p class="lead mb-4">
        Sign in with your Google account to reset student passwords.
      </p>

      <button id="googleSignIn" class="btn google-btn w-100 py-3 fs-5">
        <img
          src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
          alt=""
          class="google-icon me-2"
        />
        <span id="btnText">Sign in with Google</span>
        <div id="btnSpinner" class="spinner-border text-primary d-none" role="status"></div>
      </button>

      <p class="mt-3">
        <a href="{{ url_for('help_page') }}">Need help signing in?</a>
      </p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Theme toggle
    const html = document.documentElement;
    const toggle = document.getElementById('toggleTheme');
    html.className = (localStorage.getItem('theme') || 'light') + '-mode';
    toggle.onclick = () => {
      const next = html.classList.contains('light-mode') ? 'dark' : 'light';
      html.className = next + '-mode';
      localStorage.setItem('theme', next);
    };

    // Googleâ€‘signâ€‘in spinner
    const btn = document.getElementById('googleSignIn');
    btn.onclick = () => {
      btn.disabled = true;
      document.getElementById('btnText').classList.add('d-none');
      document.getElementById('btnSpinner').classList.remove('d-none');
      window.location = "{{ url_for('login_google') }}";
    };
  </script>
</body>
</html>

