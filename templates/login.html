<!DOCTYPE html>
<html lang="en" class="light-mode">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sign In &bull; ResetApp</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Our shared styles, including darkâ€‘mode overrides -->
  <link
    href="{{ url_for('static', filename='css/style.css') }}"
    rel="stylesheet"
  />
</head>
<body>
  <div class="theme-toggle">
    <button class="btn btn-sm" id="toggleTheme">ðŸŒ“</button>
  </div>

  <div class="d-flex justify-content-center align-items-center" style="height:100vh">
    <div class="card p-5 shadow-lg text-center" style="max-width:600px; width:95%;">
      <!-- Logo -->
      <img
        id="logoImg"
        src="{{ url_for('static', filename='img/logo.png') }}"
        alt="ResetApp Logo"
        class="mb-4"
        style="height:200px;"
      />    

      <h1 class="display-4 mb-3">Welcome Back!</h1>
      <p class="lead mb-4">
        Sign in with your Google account to reset student passwords.
      </p>

      <button id="googleSignIn" class="btn google-btn w-100 py-3 fs-5">
        <img
          src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
          alt=""
          class="google-icon me-2"
        />
        <span id="btnText">Sign in with Google</span>
        <div id="btnSpinner" class="spinner-border text-primary d-none" role="status"></div>
      </button>

      <p class="mt-3">
        <a href="{{ url_for('help_page') }}">Need help signing in?</a>
      </p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- â€¦ your Bootstrap & card HTML above â€¦ -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Grab DOM elements
    const html   = document.documentElement;
    const toggle = document.getElementById('toggleTheme');
    const logo   = document.getElementById('logoImg');
    const btn    = document.getElementById('googleSignIn');
    const btnText    = document.getElementById('btnText');
    const btnSpinner = document.getElementById('btnSpinner');

    // Logo file paths
    const lightLogo = "{{ url_for('static', filename='img/logo.png') }}";
    const darkLogo  = "{{ url_for('static', filename='img/dark_mode_logo.png') }}";

    // Apply the correct theme class + logo on page load
    function initTheme() {
      const stored = localStorage.getItem('theme') || 'light';
      html.className = stored + '-mode';
      updateLogo();
    }

    // Swap the logo based on current theme class
    function updateLogo() {
      logo.src = html.classList.contains('dark-mode') ? darkLogo : lightLogo;
    }

    // Toggle handler: flip theme, persist, swap logo
    function onToggleTheme() {
      const next = html.classList.contains('light-mode') ? 'dark' : 'light';
      html.className = next + '-mode';
      localStorage.setItem('theme', next);
      updateLogo();
    }

    // Signâ€‘in button spinner
    function onGoogleClick() {
      btn.disabled = true;
      btnText.classList.add('d-none');
      btnSpinner.classList.remove('d-none');
      window.location = "{{ url_for('login_google') }}";
    }

    // Hook it all up
    toggle.addEventListener('click', onToggleTheme);
    btn.addEventListener('click', onGoogleClick);

    // Finally, initialize on page load
    initTheme();
  </script>
</body>
</html>



</body>
</html>
